
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>auto_everything.develop &#8212; auto_everything 3.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/flasky.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
     
    
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
    
    

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../index.html">auto_everything 3.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">auto_everything.develop</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for auto_everything.develop</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="kn">from</span> <span class="nn">auto_everything.terminal</span> <span class="kn">import</span> <span class="n">Terminal</span>
<span class="kn">from</span> <span class="nn">auto_everything.io</span> <span class="kn">import</span> <span class="n">IO</span>
<span class="kn">from</span> <span class="nn">auto_everything.disk</span> <span class="kn">import</span> <span class="n">Disk</span>
<span class="kn">from</span> <span class="nn">auto_everything.network</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Terminal</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">disk</span> <span class="o">=</span> <span class="n">Disk</span><span class="p">()</span>
<span class="n">io_</span> <span class="o">=</span> <span class="n">IO</span><span class="p">()</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">GRPC</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">generate_python_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">python</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;generated_grpc&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        python: like python3, python3.10 and so on...</span>

<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        output_folder: where those generated code file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;Usage&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">python</span><span class="si">}</span><span class="s2"> -m grpc_tools.protoc --help&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            # # llvm</span>
<span class="s2">            # export LDFLAGS=&quot;-L/opt/homebrew/opt/llvm/lib&quot;</span>
<span class="s2">            # export CPPFLAGS=&quot;-I/opt/homebrew/opt/llvm/include&quot;</span>
<span class="s2">            # export LDFLAGS=&quot;-L/opt/homebrew/opt/llvm/lib -Wl,-rpath,/opt/homebrew/opt/llvm/lib&quot;</span>

<span class="s2">            # # openssl</span>
<span class="s2">            # export CFLAGS=&quot;-I/opt/homebrew/opt/openssl/include&quot;</span>
<span class="s2">            # export LDFLAGS=&quot;-L/opt/homebrew/opt/openssl/lib&quot;</span>
<span class="s2">            # export C_INCLUDE_PATH=/opt/homebrew/include</span>
<span class="s2">            # export CPLUS_INCLUDE_PATH=/opt/homebrew/include</span>
<span class="s2">            # export LIBRARY_PATH=/opt/homebrew/lib</span>

<span class="s2">            # export PKG_CONFIG_PATH=&quot;/opt/homebrew/opt/zlib/lib/pkgconfig&quot;</span>
<span class="s2">            # export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:&quot;/opt/homebrew/opt/qt@5/lib/pkgconfig&quot;</span>
<span class="s2">            # export CMAKE_PREFIX_PATH=&quot;/opt/homebrew/opt/zlib&quot;</span>
<span class="s2">            # export CMAKE_PREFIX_PATH=$CMAKE_PREFIX_PATH:&quot;/opt/homebrew/opt/qt@5&quot;</span>

<span class="s2">            source ~/.bashrc</span>
<span class="s2">            </span><span class="si">{</span><span class="n">python</span><span class="si">}</span><span class="s2"> -m pip install grpcio grpcio-tools</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;You should install grpc_tools by using:</span><span class="se">\n</span><span class="si">{</span><span class="n">python</span><span class="si">}</span><span class="s2"> -m pip install grpcio grpcio-tools&quot;</span>
            <span class="p">)</span>

        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        </span><span class="si">{</span><span class="n">python</span><span class="si">}</span><span class="s2"> -m pip install &quot;betterproto[compiler]==2.0.0b5&quot;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s1">/*&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span>

        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        mkdir -p </span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span>
<span class="s2">        </span><span class="si">{</span><span class="n">python</span><span class="si">}</span><span class="s2"> -m grpc_tools.protoc --proto_path &#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; --python_betterproto_out=&#39;</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&#39; &#39;</span><span class="si">{</span><span class="n">input_command</span><span class="si">}</span><span class="s2">&#39;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="c1">#--experimental_allow_proto3_optional</span>

    <span class="k">def</span> <span class="nf">generate_golang_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;generated_grpc&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        output_folder: where those generated golang file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;not found&quot;</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;protoc --version&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;You should install protobuf-compiler by using:</span><span class="se">\n\n</span><span class="s2">sudo apt install -y protobuf-compiler&quot;</span>
            <span class="p">)</span>

        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.28</span>
<span class="s2">        go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.2</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s1">/*&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span>
        
        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        mkdir -p </span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span>
<span class="s2">        protoc --proto_path &#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; --go_out=&#39;</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&#39; --go-grpc_out=&#39;</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">input_command</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_dart_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lib/generated_grpc&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        output_folder: where those generated code file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;not found&quot;</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;protoc --version&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;You should install protobuf-compiler by using:</span><span class="se">\n\n</span><span class="s2">sudo apt install -y protobuf-compiler&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;&quot;</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;which $HOME/.pub-cache/bin/protoc-gen-dart&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;You should install protoc-gen-dart by using:</span><span class="se">\n\n</span><span class="s2">dart pub global activate protoc_plugin&quot;</span>
            <span class="p">)</span>

        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s1">/*&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span>

        <span class="c1"># protoc --dart_out=grpc:lib/src/generated -Iprotos protos/helloworld.proto</span>
        <span class="c1"># dart pub global activate protoc_plugin</span>
        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        mkdir -p </span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span>
<span class="s2">        export PATH=&quot;$PATH&quot;:&quot;$HOME/.pub-cache/bin&quot;</span>
<span class="s2">        protoc --proto_path &#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; --dart_out=grpc:</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">input_command</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_typescript_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">project_root_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;src/generated_grpc&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        project_root_folder: where the `package.json` file was located</span>

<span class="sd">        output_folder: where those generated golang file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">project_root_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="n">project_root_folder</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">package_json_exists</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;package.json&quot;</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">package_json_exists</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">package_json_exists</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span><span class="s2">&#39; is not a npm/yarn project, because it doesn&#39;t have package.json file!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;not found&quot;</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;protoc --version&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;You should install protobuf-compiler by using:</span><span class="se">\n\n</span><span class="s2">sudo apt install -y protobuf-compiler&quot;</span>
            <span class="p">)</span>

        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">cd </span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span>

<span class="s2">yarn add grpc-tools --ignore-scripts -D</span>
<span class="s2">yarn add ts-protoc-gen@next -D</span>

<span class="s2"># if [[ $OSTYPE == &#39;darwin&#39;* ]]; then</span>
<span class="s2">#     # brew install protobuf@3</span>
<span class="s2">#     # brew link --overwrite protobuf@3</span>
<span class="s2">    pushd &quot;</span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span><span class="s2">/node_modules/grpc-tools&quot;</span>
<span class="s2">    ./node_modules/.bin/node-pre-gyp install --target_arch=x64</span>
<span class="s2">    popd</span>
<span class="s2"># fi</span>

<span class="s2">yarn add @protobuf-ts/plugin</span>
<span class="s2"># yarn add @improbable-eng/grpc-web</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s1">/*&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_command</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_files</span><span class="p">)</span>
        
        <span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">mkdir -p </span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span>

<span class="s2"># --js_out=&quot;import_style=commonjs,binary:</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&quot; </span><span class="se">\</span>

<span class="s2">protoc </span><span class="se">\</span>
<span class="s2">    --proto_path </span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">    --plugin=&quot;protoc-gen-ts=</span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span><span class="s2">/node_modules/.bin/protoc-gen-ts&quot; </span><span class="se">\</span>
<span class="s2">    --plugin=&quot;protoc-gen-grpc=</span><span class="si">{</span><span class="n">project_root_folder</span><span class="si">}</span><span class="s2">/node_modules/.bin/grpc_tools_node_protoc_plugin&quot; </span><span class="se">\</span>
<span class="s2">    --ts_out=&quot;service=grpc-web,mode=grpc-js:</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&quot; </span><span class="se">\</span>
<span class="s2">    --grpc_out=&quot;grpc_js:</span><span class="si">{</span><span class="n">output_folder</span><span class="si">}</span><span class="s2">&quot; </span><span class="se">\</span>
<span class="s2">    </span><span class="si">{</span><span class="n">input_command</span><span class="si">}</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_raw_data_from_proto_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proto_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">proto_string</span> <span class="o">=</span> <span class="n">io_</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">proto_file_path</span><span class="p">)</span>
        <span class="n">found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;message\s+(?P&lt;object_name&gt;\w+)\s+\{(?P&lt;properties&gt;(\s*.*?\s*)+)\}&quot;</span><span class="p">,</span> <span class="n">proto_string</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">found</span>
    
    <span class="k">def</span> <span class="nf">_get_data_from_proto_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proto_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">proto_string</span> <span class="o">=</span> <span class="n">io_</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">proto_file_path</span><span class="p">)</span>

        <span class="n">found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;message\s+(?P&lt;object_name&gt;\w+)\s+\{(?P&lt;properties&gt;(\s*.*?\s*)+)\}&quot;</span><span class="p">,</span> <span class="n">proto_string</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
        <span class="n">found</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">one</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">found</span>
                <span class="p">]</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">property_text</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">property_text</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">property_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\w+\s+(?P&lt;property&gt;\w+)\s+=\s+\d+;&quot;</span><span class="p">,</span> <span class="n">property_text</span><span class="p">)</span>
                <span class="n">data</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">property_list</span>
        
        <span class="k">return</span> <span class="n">data</span> <span class="c1">#type: ignore</span>
    
    <span class="k">def</span> <span class="nf">generate_key_string_map_from_protocols</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">for_which_language</span><span class="p">:</span><span class="nb">str</span> <span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;grpc_key_string_maps&quot;</span><span class="p">):</span>
        <span class="c1">#your name</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        for_which_language: &#39;rust&#39;, &#39;python&#39;, &#39;kotlin&#39;, &#39;go&#39;...</span>

<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        output_folder: where those generated code file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">is_directory</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The input_folder must be an directory.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output_folder</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output_folder_variable_name</span> <span class="o">=</span> <span class="p">[</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">output_folder</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;You must give &#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">output_folder_variable_name</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; paramater.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">disk</span><span class="o">.</span><span class="n">create_a_folder</span><span class="p">(</span><span class="n">output_folder</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>
        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">input_folder</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">type_limiter</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.proto&quot;</span><span class="p">])</span>

        <span class="n">new_files</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">one</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">input_files</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">one</span><span class="p">)]):</span>
                <span class="n">new_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">new_files</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">for_which_language</span> <span class="o">==</span> <span class="s2">&quot;python&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">data_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_from_proto_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">target_file_path</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">filename</span><span class="o">+</span><span class="s2">&quot;.py&quot;</span><span class="p">)</span>

                <span class="n">sub_class_container_list</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">variable_list</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s2">: str = &quot;</span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
                    <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                    
                    <span class="n">sub_class_container_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">class </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>
<span class="s2">    __property_list__: List[str] = [</span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="n">one</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">value</span><span class="p">])</span><span class="si">}</span><span class="s2">]</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>

                <span class="n">sub_class_container_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_class_container_list</span><span class="p">)</span>
                <span class="n">python_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">from typing import List</span>

<span class="si">{</span><span class="n">sub_class_container_list_text</span><span class="si">}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>

                <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">target_file_path</span><span class="p">,</span> <span class="n">python_code</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">for_which_language</span> <span class="o">==</span> <span class="s2">&quot;rust&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">data_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_from_proto_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                    (VoiceRequest, [&#39;uuid&#39;, &#39;timestamp&#39;, &#39;voice&#39;])</span>
<span class="sd">                    (VoiceReply, [&#39;uuid&#39;, &#39;timestamp&#39;, &#39;voice&#39;])</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">target_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">filename</span><span class="o">+</span><span class="s2">&quot;.rs&quot;</span><span class="p">)</span>

                <span class="n">kotlin_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">kotlin_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="se">\n</span>
<span class="s2">pub struct </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="se">}}</span>
<span class="s2">                    &quot;&quot;&quot;</span>

                    <span class="n">property_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;    pub const </span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s1">: &amp;str = &quot;</span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s1">&quot;;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                    <span class="n">kotlin_code</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">impl </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">    </span><span class="si">{</span><span class="n">property_text</span><span class="si">}</span>
<span class="se">}}</span>
<span class="s2">                    &quot;&quot;&quot;</span>
                <span class="n">kotlin_code</span> <span class="o">=</span> <span class="n">kotlin_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">target_file_path</span><span class="p">,</span> <span class="n">kotlin_code</span><span class="p">)</span>

            <span class="n">mod_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">&quot;mod.rs&quot;</span><span class="p">)</span>
            <span class="n">disk</span><span class="o">.</span><span class="n">delete_a_file</span><span class="p">(</span><span class="n">mod_file_path</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">io_</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mod_file_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">pub mod </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">for_which_language</span> <span class="o">==</span> <span class="s2">&quot;kotlin&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">data_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_from_proto_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">target_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">filename</span><span class="o">+</span><span class="s2">&quot;.kt&quot;</span><span class="p">)</span>

                <span class="n">sub_class_container_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    var </span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s2">: String = &quot;</span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
                    <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                    
                    <span class="n">sub_class_container_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            class </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">                companion object </span><span class="se">{{</span>
<span class="s2">                    @JvmField </span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>
<span class="s2">                    val __property_list__: List&lt;String&gt; = listOf(</span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;&quot;&#39;</span><span class="o">+</span><span class="n">one</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">value</span><span class="p">])</span><span class="si">}</span><span class="s2">)</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>

                <span class="n">sub_class_container_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_class_container_list</span><span class="p">)</span>
                <span class="n">kotlin_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">package grpc_key_string_maps</span>

<span class="s2">class </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">_key_string_maps </span><span class="se">{{</span>
<span class="s2">    companion object </span><span class="se">{{</span>
<span class="si">{</span><span class="n">sub_class_container_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="se">}}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>

                <span class="c1"># var __column_key_list: List&lt;String&gt; = listOf&lt;String&gt;()</span>
                <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">target_file_path</span><span class="p">,</span> <span class="n">kotlin_code</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">for_which_language</span> <span class="o">==</span> <span class="s2">&quot;golang&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">data_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_data_from_proto_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="n">sub_folder_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">_grpc_key_string_maps&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sub_folder_path</span><span class="p">):</span>
                    <span class="n">disk</span><span class="o">.</span><span class="n">create_a_folder</span><span class="p">(</span><span class="n">sub_folder_path</span><span class="p">)</span>
                <span class="n">target_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">sub_folder_path</span><span class="p">,</span> <span class="n">filename</span><span class="o">+</span><span class="s2">&quot;.go&quot;</span><span class="p">)</span>

                <span class="n">sub_class_container_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data_</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">struct_property_declaration_list</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s2">    string</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span>
                    <span class="p">]</span>
                    <span class="n">struct_property_declaration_list_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">struct_property_declaration_list</span><span class="p">)</span>

                    <span class="n">struct_property_real_value_list</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s2">:    &quot;</span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s2">&quot;,</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span>
                    <span class="p">]</span>
                    <span class="n">struct_property_real_value_list_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">struct_property_real_value_list</span><span class="p">)</span>

                    <span class="n">column_key_list_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &quot;</span><span class="si">{</span><span class="n">one</span><span class="si">}</span><span class="s1">&quot;,</span>
<span class="s1">                    &#39;&#39;&#39;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">value</span><span class="p">])</span>
                    <span class="n">one_part</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">var </span><span class="si">{</span><span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s2"> = struct </span><span class="se">{{</span><span class="si">{</span><span class="n">struct_property_declaration_list_text</span><span class="si">}</span>

<span class="s2">    Column_key_list__    []string</span>
<span class="se">}}</span><span class="s2"> </span><span class="se">{{</span><span class="si">{</span><span class="n">struct_property_real_value_list_text</span><span class="si">}</span>

<span class="s2">    Column_key_list__:    []string</span><span class="se">{{</span><span class="si">{</span><span class="n">column_key_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2">,</span>
<span class="se">}}</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                    <span class="n">sub_class_container_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">one_part</span><span class="p">)</span>
                <span class="n">sub_class_container_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sub_class_container_list</span><span class="p">)</span>

                <span class="n">template</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">package </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">_grpc_key_string_maps</span>

<span class="si">{</span><span class="n">sub_class_container_list_text</span><span class="si">}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                <span class="c1"># var Column_key_list__: List&lt;String&gt; = listOf&lt;String&gt;()</span>
                <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">target_file_path</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We don&#39;t support &#39;</span><span class="si">{</span><span class="n">for_which_language</span><span class="si">}</span><span class="s2">&#39; language.&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="YRPC"><a class="viewcode-back" href="../../index.html#auto_everything.develop.YRPC">[docs]</a><span class="k">class</span> <span class="nc">YRPC</span><span class="p">:</span>
    <span class="n">_yrpc_type_to_python_type_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>

        <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>

        <span class="s2">&quot;uint32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>

        <span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
        <span class="s2">&quot;double&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span>
    <span class="p">}</span>

    <span class="n">_yrpc_type_to_dart_type_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;String&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;String&quot;</span><span class="p">,</span>

        <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>

        <span class="s2">&quot;uint32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int32&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>

        <span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span>
        <span class="s2">&quot;double&quot;</span><span class="p">:</span> <span class="s2">&quot;double&quot;</span>
    <span class="p">}</span>

    <span class="n">_yrpc_type_to_typescript_type_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="s2">&quot;bytes&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>

        <span class="s2">&quot;bool&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>

        <span class="s2">&quot;uint32&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint32&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sint64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed32&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sfixed64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int32&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;int64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;uint64&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>

        <span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
        <span class="s2">&quot;double&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="n">code_block_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?P&lt;type&gt;\w+)\s+(?P&lt;object_name&gt;\w+)\s+\{(?P&lt;properties&gt;(\s*.*?\s*)+)\}&quot;</span><span class="p">,</span> <span class="n">source_code</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span><span class="p">)</span>
        <span class="n">code_block_list</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[</span><span class="n">string</span> <span class="k">for</span> <span class="n">string</span> <span class="ow">in</span> <span class="n">one</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">code_block_list</span>
                <span class="p">]</span>

        <span class="n">new_parsed_object_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">code_block_list</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">type_</span> <span class="o">==</span> <span class="s2">&quot;service&quot;</span><span class="p">):</span>
                    <span class="n">new_parsed_object_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">type_</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">class_name</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">content</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">property_text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">content</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">property_text</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">continue</span>

                    <span class="n">property_list</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">type_</span> <span class="o">==</span> <span class="s2">&quot;message&quot;</span><span class="p">):</span>
                        <span class="n">property_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?P&lt;feature&gt;\w*)\s+(?P&lt;type&gt;\w+)\s+(?P&lt;property&gt;\w+)\s+=\s+\d+;&quot;</span><span class="p">,</span> <span class="n">property_text</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="p">(</span><span class="n">type_</span> <span class="o">==</span> <span class="s2">&quot;enum&quot;</span><span class="p">):</span>
                        <span class="n">property_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?P&lt;property&gt;\w+)\s+=\s+\d+;&quot;</span><span class="p">,</span> <span class="n">property_text</span><span class="p">)</span>
                        <span class="n">property_list</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="n">one</span><span class="p">)</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">property_list</span><span class="p">]</span>

                    <span class="n">new_parsed_object_list</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">type_</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">class_name</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">property_list</span><span class="p">])</span>
        
        <span class="n">class_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">new_parsed_object_list</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">class_name_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">class_name_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;You must make sure there has no duplicated class/message name.&quot;</span><span class="p">)</span>

        <span class="n">enum_class_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">new_parsed_object_list</span> <span class="k">if</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;enum&quot;</span><span class="p">]</span>

        <span class="n">arguments_defination_tree</span><span class="p">:</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">new_parsed_object_list</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
            <span class="n">code_block_type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">variable_list</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">code_block_type</span> <span class="o">==</span> <span class="s2">&quot;service&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">one</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;You must make sure there has no duplicated variable name.&quot;</span><span class="p">)</span>

            <span class="n">arguments_defination_tree</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;**type**&quot;</span><span class="p">:</span> <span class="n">code_block_type</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">one_variable</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">:</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="n">one_variable</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="n">one_variable</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">one_variable</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

                <span class="n">arguments_defination_tree</span><span class="p">[</span><span class="n">class_name</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span> 
                    <span class="s2">&quot;is_list&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">feature</span> <span class="o">==</span> <span class="s2">&quot;repeated&quot;</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s2">&quot;is_enum&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="p">(</span><span class="nb">type</span> <span class="ow">in</span> <span class="n">enum_class_name_list</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s2">&quot;is_custom_message_type&quot;</span><span class="p">:</span> <span class="kc">True</span> <span class="k">if</span> <span class="p">((</span><span class="nb">type</span> <span class="ow">in</span> <span class="n">class_name_list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">enum_class_name_list</span><span class="p">))</span> <span class="k">else</span> <span class="kc">False</span><span class="p">,</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;feature&quot;</span><span class="p">:</span> <span class="n">feature</span>
                <span class="p">}</span>

        <span class="n">rpc_defination_tree</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">new_parsed_object_list</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
            <span class="n">code_block_type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">code_block_type</span> <span class="o">!=</span> <span class="s2">&quot;service&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;rpc\s+(?P&lt;function_name&gt;\w+)\s+\((?P&lt;input_variable&gt;[\w\s]+)\)\s+returns\s+\((?P&lt;output_variable&gt;[\w\s]+)\);&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

            <span class="n">name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">one</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;You must make sure there has no duplicated variable name.&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">:</span>
                <span class="n">function_name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">input_variable</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">output_variable</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                <span class="n">rpc_defination_tree</span><span class="p">[</span><span class="n">function_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;input_variable&quot;</span><span class="p">:</span> <span class="n">input_variable</span><span class="p">,</span>
                    <span class="s2">&quot;output_variable&quot;</span><span class="p">:</span> <span class="n">output_variable</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="n">arguments_defination_tree</span><span class="p">,</span> <span class="n">rpc_defination_tree</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_python_objects_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">arguments_dict</span><span class="p">,</span> <span class="n">rpc_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">enum_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dataclass_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">class_name</span><span class="p">,</span> <span class="n">class_info</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">code_block_type</span> <span class="o">=</span> <span class="n">class_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">class_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">code_block_type</span> <span class="o">==</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">class_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>

                <span class="n">enum_class_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">class </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">(Enum):</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">enum_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enum_class_text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">key_string_dict_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">class_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="nb">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yrpc_type_to_python_type_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span> 
                    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="nb">type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We don&#39;t support type of &#39;</span><span class="si">{</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    <span class="n">is_list</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_list&#39;</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">is_list</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2"> | None = None</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: list[</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">] | None = None</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="n">property_name_to_its_type_dict_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">,</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="n">key_string_dict_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: str = &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>
                <span class="n">property_name_to_its_type_dict_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">)</span>
                <span class="n">key_string_dict_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_string_dict_list</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_string_dict_list_text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">key_string_dict_list_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        pass</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">dataclass_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">@dataclass()</span>
<span class="s2">class </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">(YRPC_OBJECT_BASE_CLASS):</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>

<span class="s2">    _property_name_to_its_type_dict = </span><span class="se">{{</span>
<span class="si">{</span><span class="n">property_name_to_its_type_dict_variable_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    @dataclass()</span>
<span class="s2">    class _key_string_dict:</span>
<span class="si">{</span><span class="n">key_string_dict_list_text</span><span class="si">}</span>

<span class="s2">    def from_dict(self, dict: dict[str, Any]):</span>
<span class="s2">        new_variable: </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> = super().from_dict(dict)</span>
<span class="s2">        return new_variable</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">dataclass_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataclass_text</span><span class="p">)</span>

        <span class="n">enum_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">enum_code_block_list</span><span class="p">)</span>
        <span class="n">dataclass_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataclass_code_block_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">import copy</span>
<span class="s2">from dataclasses import dataclass</span>
<span class="s2">from enum import Enum</span>
<span class="s2">from typing import Any</span>


<span class="s2">_ygrpc_official_types = [int, float, str, bool]</span>


<span class="s2">def convert_dict_that_has_enum_object_into_pure_dict(value: Any) -&gt; dict[str, Any] | list[Any] | Any:</span>
<span class="s2">    if type(value) is list:</span>
<span class="s2">        new_list: list[Any] = []</span>
<span class="s2">        for one in value: #type: ignore</span>
<span class="s2">            new_list.append(convert_dict_that_has_enum_object_into_pure_dict(value=one)) </span>
<span class="s2">        return new_list</span>
<span class="s2">    elif type(value) is dict:</span>
<span class="s2">        new_dict: dict[str, Any] = </span><span class="se">{{}}</span>
<span class="s2">        for key_, value_ in value.items(): #type: ignore</span>
<span class="s2">            new_dict[key_] = convert_dict_that_has_enum_object_into_pure_dict(value=value_) #type: ignore</span>
<span class="s2">        return new_dict</span>
<span class="s2">    else:</span>
<span class="s2">        if str(type(value)).startswith(&quot;&lt;enum&quot;):</span>
<span class="s2">            return value.name</span>
<span class="s2">        else:</span>
<span class="s2">            if type(value) in _ygrpc_official_types:</span>
<span class="s2">                return value</span>
<span class="s2">            else:</span>
<span class="s2">                # handle custom message data type</span>
<span class="s2">                if value == None:</span>
<span class="s2">                    return None</span>
<span class="s2">                elif str(type(value)).startswith(&quot;&lt;class&quot;):</span>
<span class="s2">                    return convert_dict_that_has_enum_object_into_pure_dict(</span>
<span class="s2">                        value=value.to_dict()</span>
<span class="s2">                    )</span>
<span class="s2">    return None</span>


<span class="s2">def convert_pure_dict_into_a_dict_that_has_enum_object(pure_value: Any, refrence_value: Any) -&gt; Any:</span>
<span class="s2">    if type(pure_value) is list:</span>
<span class="s2">        new_list: list[Any] = []</span>
<span class="s2">        for one in pure_value: #type: ignore</span>
<span class="s2">            new_list.append(</span>
<span class="s2">                convert_pure_dict_into_a_dict_that_has_enum_object(pure_value=one, refrence_value=refrence_value)</span>
<span class="s2">            ) </span>
<span class="s2">        return new_list</span>
<span class="s2">    elif type(pure_value) is dict:</span>
<span class="s2">        if str(refrence_value).startswith(&quot;&lt;class&quot;):</span>
<span class="s2">            new_object = refrence_value()</span>
<span class="s2">            old_property_list = getattr(new_object, &quot;_property_name_to_its_type_dict&quot;)</span>
<span class="s2">            for key in old_property_list.keys():</span>
<span class="s2">                if key in pure_value.keys():</span>
<span class="s2">                    setattr(new_object, key, convert_pure_dict_into_a_dict_that_has_enum_object(pure_value[key], old_property_list[key])) # type: ignore</span>
<span class="s2">            return new_object</span>
<span class="s2">        else:</span>
<span class="s2">            return None</span>
<span class="s2">    else:</span>
<span class="s2">        if str(refrence_value).startswith(&quot;&lt;enum&quot;):</span>
<span class="s2">            default_value = None</span>
<span class="s2">            for temp_index, temp_value in enumerate(refrence_value._member_names_):</span>
<span class="s2">                if temp_value == pure_value:</span>
<span class="s2">                    default_value = refrence_value(temp_value) </span>
<span class="s2">                    break</span>
<span class="s2">            return default_value</span>
<span class="s2">        else:</span>
<span class="s2">            if refrence_value in _ygrpc_official_types:</span>
<span class="s2">                return pure_value</span>
<span class="s2">            else:</span>
<span class="s2">                return None</span>


<span class="s2">class YRPC_OBJECT_BASE_CLASS:</span>
<span class="s2">    def to_dict(self, ignore_null: bool=False) -&gt; dict[str, Any]:</span>
<span class="s2">        old_dict = </span><span class="se">{{}}</span>
<span class="s2">        for key in self._property_name_to_its_type_dict.keys(): #type: ignore</span>
<span class="s2">            old_dict[key] = self.__dict__[key] #type: ignore</span>
<span class="s2">        new_dict = convert_dict_that_has_enum_object_into_pure_dict(value=old_dict.copy())</span>
<span class="s2">        return new_dict.copy() #type: ignore</span>

<span class="s2">    def from_dict(self, dict: dict[str, Any]) -&gt; Any:</span>
<span class="s2">        new_object = convert_pure_dict_into_a_dict_that_has_enum_object(pure_value=dict.copy(), refrence_value=self.__class__)</span>

<span class="s2">        new_object_dict = new_object.__dict__.copy() </span>
<span class="s2">        for key, value in new_object_dict.items():</span>
<span class="s2">            if key in self.__dict__:</span>
<span class="s2">                setattr(self, key, value)</span>

<span class="s2">        return new_object</span>

<span class="s2">    def _clone(self) -&gt; Any:</span>
<span class="s2">        return copy.deepcopy(self)</span>


<span class="si">{</span><span class="n">enum_code_block_list_text</span><span class="si">}</span>

<span class="s2">        </span>
<span class="si">{</span><span class="n">dataclass_code_block_list_text</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">template_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_python_rpc_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">rpc_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">service_class_function_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">service_api_function_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">parameter_info</span> <span class="ow">in</span> <span class="n">rpc_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">input_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;input_variable&quot;</span><span class="p">]</span>
            <span class="n">output_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;output_variable&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">input_variable</span><span class="p">:</span>
                <span class="n">input_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">input_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">output_variable</span><span class="p">:</span>
                <span class="n">output_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">output_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">service_class_function_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    async def </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">(self, item: </span><span class="si">{</span><span class="n">input_variable</span><span class="si">}</span><span class="s2">) -&gt; </span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">:</span>
<span class="s2">        return </span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">()</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

            <span class="n">service_api_function_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    @router.post(&quot;/</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">/&quot;, tags=[&quot;</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">&quot;])</span>
<span class="s2">    async def </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">(item: </span><span class="si">{</span><span class="n">input_variable</span><span class="si">}</span><span class="s2">) -&gt; </span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">:</span>
<span class="s2">        item = </span><span class="si">{</span><span class="n">input_variable</span><span class="si">}</span><span class="s2">().from_dict(item.to_dict())</span>
<span class="s2">        return (await service_instance.</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">(item)).to_dict()</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

        
        <span class="n">service_class_function_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">service_class_function_list</span><span class="p">)</span>
        <span class="n">service_api_function_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">service_api_function_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">from .</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects import *</span>


<span class="s2">from fastapi import APIRouter, FastAPI</span>
<span class="s2">from fastapi.staticfiles import StaticFiles</span>
<span class="s2">from starlette.responses import FileResponse </span>
<span class="s2">from fastapi.middleware.cors import CORSMiddleware</span>
<span class="s2">import uvicorn</span>
<span class="s2">import os</span>


<span class="s2">router = APIRouter()</span>


<span class="s2">class Service_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">service_class_function_list_text</span><span class="si">}</span>


<span class="s2">def init(service_instance: Any):</span>
<span class="si">{</span><span class="n">service_api_function_list_text</span><span class="si">}</span>


<span class="s2">def run(service_instance: Any, port: str, html_folder_path: str=&quot;&quot;, serve_html_under_which_url: str=&quot;/&quot;):</span>
<span class="s2">    init(service_instance=service_instance)</span>

<span class="s2">    app = FastAPI()</span>
<span class="s2">    app.add_middleware(</span>
<span class="s2">        CORSMiddleware,</span>
<span class="s2">        allow_origins=[&#39;*&#39;],</span>
<span class="s2">        allow_credentials=True,</span>
<span class="s2">        allow_methods=[&quot;*&quot;],</span>
<span class="s2">        allow_headers=[&quot;*&quot;],</span>
<span class="s2">    )</span>
<span class="s2">    app.include_router(</span>
<span class="s2">        router,</span>
<span class="s2">        prefix=&quot;/</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">&quot;,</span>
<span class="s2">    )</span>

<span class="s2">    if (html_folder_path != &quot;&quot;):</span>
<span class="s2">        if os.path.exists(html_folder_path) and os.path.isdir(html_folder_path):</span>
<span class="s2">            app.mount(serve_html_under_which_url, StaticFiles(directory=html_folder_path, html = True), name=&quot;web&quot;)</span>
<span class="s2">            @app.get(serve_html_under_which_url, response_model=str)</span>
<span class="s2">            async def index_page():</span>
<span class="s2">                return FileResponse(os.path.join(html_folder_path, &#39;index.html&#39;))</span>
<span class="s2">            @app.exception_handler(404) #type: ignore</span>
<span class="s2">            async def custom_404_handler(_, __): #type: ignore</span>
<span class="s2">                return FileResponse(os.path.join(html_folder_path, &#39;index.html&#39;))</span>
<span class="s2">            print(f&quot;The website is running at: http://127.0.0.1:</span><span class="se">{{</span><span class="s2">port</span><span class="se">}}</span><span class="s2">/&quot;)</span>
<span class="s2">        else:</span>
<span class="s2">            print(f&quot;Error: You should give me an absolute html_folder_path than </span><span class="se">{{</span><span class="s2">html_folder_path</span><span class="se">}}</span><span class="s2">&quot;)</span>

<span class="s2">    print(f&quot;You can see the docs here: http://127.0.0.1:</span><span class="se">{{{{</span><span class="s2">port</span><span class="se">}}}}</span><span class="s2">/docs&quot;)</span>
<span class="s2">    uvicorn.run( #type: ignore</span>
<span class="s2">        app=app,</span>
<span class="s2">        host=&quot;0.0.0.0&quot;,</span>
<span class="s2">        port=int(port)</span>
<span class="s2">    ) </span>


<span class="s2">if __name__ == &quot;__main__&quot;:</span>
<span class="s2">    service_instance = Service_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">()</span>
<span class="s2">    run(service_instance, port=&quot;6060&quot;)</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">template_text</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_dart_objects_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">arguments_dict</span><span class="p">,</span> <span class="n">rpc_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">enum_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dataclass_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">class_name</span><span class="p">,</span> <span class="n">variable_info</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">code_block_type</span> <span class="o">=</span> <span class="n">variable_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">variable_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">code_block_type</span> <span class="o">==</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variable_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">,</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>

                <span class="n">enum_class_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">enum </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>
<span class="se">}}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">enum_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enum_class_text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">constructor_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">key_string_dict_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="n">to_dict_function_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="n">from_dict_function_variable_list_1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">from_dict_function_variable_list_2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variable_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="nb">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yrpc_type_to_dart_type_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span> 
                    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="nb">type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We don&#39;t support type of &#39;</span><span class="si">{</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    <span class="n">is_list</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_list&#39;</span><span class="p">]</span>
                    <span class="n">is_enum</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_enum&#39;</span><span class="p">]</span>
                    <span class="n">is_custom_message_type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_custom_message_type&#39;</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">is_list</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">? </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  List&lt;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&gt;? </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    
                    <span class="n">constructor_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

                    <span class="n">property_name_to_its_type_dict_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">,</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="n">key_string_dict_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  final String </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;;</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">is_enum</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">to_dict_function_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">?.map((e) =&gt; e.name).toList(),</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">to_dict_function_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">?.name,</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="n">is_custom_message_type</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">to_dict_function_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">?.map((e) =&gt; e.to_dict()).toList(),</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">to_dict_function_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">?.to_dict(),</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">to_dict_function_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">,</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">is_enum</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]?.map((e1) </span><span class="se">{{</span>
<span class="s2">      return </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values</span>
<span class="s2">                  .map((e2) =&gt; e2.name)</span>
<span class="s2">                  .toList()</span>
<span class="s2">                  .indexOf(e1) ==</span>
<span class="s2">              -1</span>
<span class="s2">          ? null</span>
<span class="s2">          : </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.byName(e1);</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2">)</span>
<span class="s2">    ?.toList()</span>
<span class="s2">    .cast&lt;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&gt;() ?? null</span>
<span class="s2">    ;</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> =</span>
<span class="s2">        </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.map((e) =&gt; e.name).toList().indexOf(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]) == -1</span>
<span class="s2">            ? null</span>
<span class="s2">            : </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.byName(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]);</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="n">is_custom_message_type</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]</span>
<span class="s2">            ?.map((e) =&gt; </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">().from_dict(e))</span>
<span class="s2">            ?.toList()</span>
<span class="s2">            ?.cast&lt;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&gt;() ??</span>
<span class="s2">        null;</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">().from_dict(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]);</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">from_dict_function_variable_list_1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    this.</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;];</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">is_enum</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]?.map((e1) </span><span class="se">{{</span>
<span class="s2">        return </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values</span>
<span class="s2">                    .map((e2) =&gt; e2.name)</span>
<span class="s2">                    .toList()</span>
<span class="s2">                    .indexOf(e1) ==</span>
<span class="s2">                -1</span>
<span class="s2">            ? null</span>
<span class="s2">            : </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.byName(e1);</span>
<span class="s2">      </span><span class="se">}}</span><span class="s2">)</span>
<span class="s2">      ?.toList()</span>
<span class="s2">      .cast&lt;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&gt;() ?? null</span>
<span class="s2">      ,</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span>
<span class="s2">        </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.map((e) =&gt; e.name).toList().indexOf(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]) == -1</span>
<span class="s2">            ? null</span>
<span class="s2">            : </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">.values.byName(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]),</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="n">is_custom_message_type</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_list</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]</span>
<span class="s2">              ?.map((e) =&gt; </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">().from_dict(e))</span>
<span class="s2">              ?.toList()</span>
<span class="s2">              ?.cast&lt;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&gt;() ??</span>
<span class="s2">          null,</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">from_dict_function_variable_list_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">().from_dict(json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;]),</span>
<span class="s2">                            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">from_dict_function_variable_list_2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: json[&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;],</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>
                <span class="n">constructor_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">constructor_variable_list</span><span class="p">)</span> 
                <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">constructor_variable_list_text</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">constructor_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;{&quot;</span> <span class="o">+</span> <span class="n">constructor_variable_list_text</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
                <span class="n">property_name_to_its_type_dict_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">)</span>
                <span class="n">key_string_dict_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_string_dict_list</span><span class="p">)</span>

                <span class="n">to_dict_function_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_dict_function_variable_list</span><span class="p">)</span>

                <span class="n">from_dict_function_variable_list_1_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">from_dict_function_variable_list_1</span><span class="p">)</span>
                <span class="n">from_dict_function_variable_list_2_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">from_dict_function_variable_list_2</span><span class="p">)</span>

                <span class="n">dataclass_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">class _Key_string_dict_for_</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">key_string_dict_list_text</span><span class="si">}</span>
<span class="se">}}</span>

<span class="s2">class </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>

<span class="s2">  </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">constructor_variable_list_text</span><span class="si">}</span><span class="s2">);</span>

<span class="s2">  final Map&lt;String, dynamic&gt; _property_name_to_its_type_dict = </span><span class="se">{{</span>
<span class="si">{</span><span class="n">property_name_to_its_type_dict_variable_list_text</span><span class="si">}</span>
<span class="s2">  </span><span class="se">}}</span><span class="s2">;</span>

<span class="s2">  final _key_string_dict_for_</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> =</span>
<span class="s2">      _Key_string_dict_for_</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">();</span>

<span class="s2">  Map&lt;String, dynamic&gt; to_dict() </span><span class="se">{{</span>
<span class="s2">    return </span><span class="se">{{</span>
<span class="si">{</span><span class="n">to_dict_function_variable_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">  </span><span class="se">}}</span>

<span class="s2">  </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> from_dict(Map&lt;String, dynamic&gt;? json) </span><span class="se">{{</span>
<span class="s2">    if (json == null) </span><span class="se">{{</span>
<span class="s2">      return </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">();</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="si">{</span><span class="n">from_dict_function_variable_list_1_text</span><span class="si">}</span>

<span class="s2">    return </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">(</span>
<span class="si">{</span><span class="n">from_dict_function_variable_list_2_text</span><span class="si">}</span>
<span class="s2">    );</span>
<span class="s2">  </span><span class="se">}}</span>
<span class="se">}}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">dataclass_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataclass_text</span><span class="p">)</span>
        
        <span class="n">enum_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">enum_code_block_list</span><span class="p">)</span>
        <span class="n">dataclass_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataclass_code_block_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">// ignore_for_file: unused_field</span>

<span class="si">{</span><span class="n">enum_code_block_list_text</span><span class="si">}</span>

<span class="si">{</span><span class="n">dataclass_code_block_list_text</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">template_text</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_dart_rpc_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">rpc_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">client_function_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">parameter_info</span> <span class="ow">in</span> <span class="n">rpc_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">input_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;input_variable&quot;</span><span class="p">]</span>
            <span class="n">output_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;output_variable&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">input_variable</span><span class="p">:</span>
                <span class="n">input_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">input_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">output_variable</span><span class="p">:</span>
                <span class="n">output_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">output_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">client_function_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  Future&lt;</span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">?&gt; </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">(</span>
<span class="s2">      </span><span class="se">{{</span><span class="s2">required </span><span class="si">{</span><span class="n">input_variable</span><span class="si">}</span><span class="s2"> item, bool ignore_error = false</span><span class="se">}}</span><span class="s2">) async </span><span class="se">{{</span>
<span class="s2">    Map&lt;String, dynamic&gt; response_dict = await this</span>
<span class="s2">        ._get_reponse_or_error_by_url_path_and_input(</span>
<span class="s2">            &quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;, item.to_dict());</span>
<span class="s2">    if (response_dict.containsKey(this._special_error_key)) </span><span class="se">{{</span>
<span class="s2">      if (!ignore_error) </span><span class="se">{{</span>
<span class="s2">        this._error_handle_function!(response_dict[this._special_error_key]);</span>
<span class="s2">      </span><span class="se">}}</span>
<span class="s2">      return null;</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">      return </span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">().from_dict(response_dict);</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">  </span><span class="se">}}</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

        <span class="n">client_function_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">client_function_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">import &quot;./</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects.dart&quot;;</span>

<span class="s2">import &#39;dart:convert&#39;;</span>
<span class="s2">import &#39;dart:io&#39;;</span>

<span class="s2">class Client_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">  /// [_service_url] is something like: &quot;http://127.0.0.1:80&quot; or &quot;https://127.0.0.1&quot;</span>
<span class="s2">  /// [_header] http headers, it&#39;s a dictionary, liek </span><span class="si">{</span><span class="s1">&#39;content-type&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="si">}</span>
<span class="s2">  /// [_error_handle_function] will get called when http request got error, you need to give it a function like: (err: String) </span><span class="se">{{</span><span class="s2">print(err)</span><span class="se">}}</span>
<span class="s2">  String _service_url = &quot;&quot;;</span>
<span class="s2">  Map&lt;String, String&gt; _header = Map&lt;String, String&gt;();</span>
<span class="s2">  String _special_error_key = &quot;__yingshaoxo&#39;s_error__&quot;;</span>
<span class="s2">  Function(String error_message)? _error_handle_function;</span>

<span class="s2">  Client_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">(</span>
<span class="s2">      </span><span class="se">{{</span><span class="s2">required String service_url,</span>
<span class="s2">      Map&lt;String, String&gt;? header,</span>
<span class="s2">      Function(String error_message)? error_handle_function</span><span class="se">}}</span><span class="s2">) </span><span class="se">{{</span>
<span class="s2">    if (service_url.endsWith(&quot;/&quot;)) </span><span class="se">{{</span>
<span class="s2">      service_url =</span>
<span class="s2">          service_url.splitMapJoin(RegExp(r&#39;/$&#39;), onMatch: (p0) =&gt; &quot;&quot;);</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    this._service_url = service_url;</span>

<span class="s2">    if (header != null) </span><span class="se">{{</span>
<span class="s2">      this._header = header;</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    if (error_handle_function == null) </span><span class="se">{{</span>
<span class="s2">      error_handle_function = (error_message) </span><span class="se">{{</span>
<span class="s2">        print(error_message);</span>
<span class="s2">      </span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    this._error_handle_function = error_handle_function;</span>
<span class="s2">  </span><span class="se">}}</span>

<span class="s2">  Future&lt;Map&lt;String, dynamic&gt;&gt; _get_reponse_or_error_by_url_path_and_input(</span>
<span class="s2">      String sub_url, Map&lt;String, dynamic&gt; input_dict) async </span><span class="se">{{</span>
<span class="s2">    String the_url = &quot;$</span><span class="se">{{</span><span class="s2">this._service_url</span><span class="se">}}</span><span class="s2">/</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">/$</span><span class="se">{{</span><span class="s2">sub_url</span><span class="se">}}</span><span class="s2">/&quot;;</span>

<span class="s2">    var client = HttpClient();</span>
<span class="s2">    client.badCertificateCallback =</span>
<span class="s2">        ((X509Certificate cert, String host, int port) =&gt; true);</span>
<span class="s2">    try </span><span class="se">{{</span>
<span class="s2">      var the_url_data = Uri.parse(the_url);</span>

<span class="s2">      HttpClientRequest request = await client.postUrl(the_url_data);</span>
<span class="s2">      request.headers.set(&#39;content-type&#39;, &#39;application/json&#39;);</span>
<span class="s2">      _header.forEach((key, value) </span><span class="se">{{</span>
<span class="s2">        request.headers.set(key, value);</span>
<span class="s2">      </span><span class="se">}}</span><span class="s2">);</span>

<span class="s2">      request.add(utf8.encode(json.encode(input_dict)));</span>

<span class="s2">      HttpClientResponse response = await request.close();</span>
<span class="s2">      final stringData = await response.transform(utf8.decoder).join();</span>
<span class="s2">      final output_dict = json.decode(stringData);</span>
<span class="s2">      return output_dict;</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> catch (e) </span><span class="se">{{</span>
<span class="s2">      return </span><span class="se">{{</span><span class="s2">_special_error_key: e.toString()</span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> finally </span><span class="se">{{</span>
<span class="s2">      client.close();</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">  </span><span class="se">}}</span>

<span class="si">{</span><span class="n">client_function_list_text</span><span class="si">}</span>
<span class="se">}}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">template_text</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_typescript_objects_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">arguments_dict</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">enum_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dataclass_code_block_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">class_name</span><span class="p">,</span> <span class="n">variable_info</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">code_block_type</span> <span class="o">=</span> <span class="n">variable_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">variable_info</span><span class="p">[</span><span class="s2">&quot;**type**&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">code_block_type</span> <span class="o">==</span> <span class="s2">&quot;enum&quot;</span><span class="p">:</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variable_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> = &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;,</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>

                <span class="n">enum_class_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">enum </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>
<span class="se">}}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">enum_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enum_class_text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">interface_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">key_string_dict_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">one</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variable_info</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                    <span class="nb">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yrpc_type_to_typescript_type_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span> 
                    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="nb">type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We don&#39;t support type of &#39;</span><span class="si">{</span><span class="n">one</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                    <span class="n">is_list</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_list&#39;</span><span class="p">]</span>
                    <span class="n">is_enum</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_enum&#39;</span><span class="p">]</span>
                    <span class="n">is_custom_message_type</span> <span class="o">=</span> <span class="n">one</span><span class="p">[</span><span class="s1">&#39;is_custom_message_type&#39;</span><span class="p">]</span>

                    <span class="n">interface_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">type</span><span class="si">}{</span><span class="s2">&quot;[]&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_list</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s2"> | null;</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">type</span><span class="si">}{</span><span class="s2">&quot;[]&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_list</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="s2"> | null = null;</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="k">if</span> <span class="n">is_enum</span> <span class="ow">or</span> <span class="n">is_custom_message_type</span><span class="p">:</span>
                        <span class="n">property_name_to_its_type_dict_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">,</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">property_name_to_its_type_dict_variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: &quot;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&quot;,</span>
<span class="s2">                        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                    <span class="n">key_string_dict_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: &quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;,</span>
<span class="s2">                    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

                <span class="n">interface_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">interface_variable_list</span><span class="p">)</span>
                <span class="n">variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">variable_list</span><span class="p">)</span>
                <span class="n">property_name_to_its_type_dict_variable_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">property_name_to_its_type_dict_variable_list</span><span class="p">)</span>
                <span class="n">key_string_dict_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_string_dict_list</span><span class="p">)</span>

                <span class="n">dataclass_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">export interface _</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">interface_variable_list_text</span><span class="si">}</span>
<span class="se">}}</span>

<span class="s2">export class </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="si">{</span><span class="n">variable_list_text</span><span class="si">}</span>

<span class="s2">    _property_name_to_its_type_dict = </span><span class="se">{{</span>
<span class="si">{</span><span class="n">property_name_to_its_type_dict_variable_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2">;</span>

<span class="s2">    _key_string_dict = </span><span class="se">{{</span>
<span class="si">{</span><span class="n">key_string_dict_list_text</span><span class="si">}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2">;</span>

<span class="s2">    to_dict(): _</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">        return _general_to_dict_function(this);</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    _clone(): </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">        let clone = Object.assign(Object.create(Object.getPrototypeOf(this)), this)</span>
<span class="s2">        return clone</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    from_dict(item: _</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">        let an_item = new </span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">()</span>
<span class="s2">        let new_dict = _general_from_dict_function(an_item, item)</span>

<span class="s2">        for (const key of Object.keys(new_dict)) </span><span class="se">{{</span>
<span class="s2">            let value = new_dict[key]</span>
<span class="s2">            //@ts-ignore</span>
<span class="s2">            this[key] = value</span>
<span class="s2">            //@ts-ignore</span>
<span class="s2">            an_item[key] = value</span>
<span class="s2">        </span><span class="se">}}</span>

<span class="s2">        return an_item</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="se">}}</span>
<span class="s2">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">dataclass_code_block_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dataclass_text</span><span class="p">)</span>

        <span class="n">enum_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">enum_code_block_list</span><span class="p">)</span>
        <span class="n">dataclass_code_block_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dataclass_code_block_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">const _ygrpc_official_types = [&quot;string&quot;, &quot;number&quot;, &quot;boolean&quot;];</span>

<span class="s2">export const clone_object_ = (obj: any) =&gt;  JSON.parse(JSON.stringify(obj));</span>

<span class="s2">export const get_secret_alphabet_dict_ = (a_secret_string: string) =&gt;  </span><span class="se">{{</span>
<span class="s2">    const ascii_lowercase = &quot;abcdefghijklmnopqrstuvwxyz&quot;.split(&quot;&quot;)</span>
<span class="s2">    const number_0_to_9 = &quot;0123456789&quot;.split(&quot;&quot;)</span>

<span class="s2">    var new_key = a_secret_string.replace(&quot; &quot;, &quot;&quot;).toLowerCase().split(&quot;&quot;)</span>
<span class="s2">    var character_list: string[] = []</span>
<span class="s2">    for (var char of new_key) </span><span class="se">{{</span>
<span class="s2">        if ((/[a-zA-Z]/).test(char)) </span><span class="se">{{</span>
<span class="s2">            if (!character_list.includes(char)) </span><span class="se">{{</span>
<span class="s2">                character_list.push(char)</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    if (character_list.length &gt;= 26) </span><span class="se">{{</span>
<span class="s2">        character_list = character_list.slice(0, 26)</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">        var characters_that_the_key_didnt_cover: string[] = []</span>
<span class="s2">        for (var char of ascii_lowercase) </span><span class="se">{{</span>
<span class="s2">            if (!character_list.includes(char)) </span><span class="se">{{</span>
<span class="s2">                characters_that_the_key_didnt_cover.push(char)</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        character_list = character_list.concat(characters_that_the_key_didnt_cover) </span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    var final_dict = </span><span class="se">{{}}</span><span class="s2"> as Record&lt;string, string&gt;</span>

<span class="s2">    // for alphabet</span>
<span class="s2">    for (let [index, char] of ascii_lowercase.entries()) </span><span class="se">{{</span>
<span class="s2">        final_dict[char] = character_list[index]</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    // for numbers</span>
<span class="s2">    var original_numbers_in_alphabet_format = ascii_lowercase.slice(0, 10) // 0-9 representations in alphabet format</span>
<span class="s2">    var secret_numbers_in_alphabet_format = Object.values(final_dict).slice(0, 10)</span>
<span class="s2">    var final_number_list = [] as string[]</span>
<span class="s2">    for (var index in number_0_to_9) </span><span class="se">{{</span>
<span class="s2">        var secret_char = secret_numbers_in_alphabet_format[index]</span>
<span class="s2">        if (original_numbers_in_alphabet_format.includes(secret_char)) </span><span class="se">{{</span>
<span class="s2">            final_number_list.push(String(original_numbers_in_alphabet_format.findIndex((x) =&gt; x===secret_char)))</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    if (final_number_list.length &gt;= 10) </span><span class="se">{{</span>
<span class="s2">        final_number_list = final_number_list.slice(0, 10)</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">        var numbers_that_didnt_get_cover = [] as string[]</span>
<span class="s2">        for (var char of number_0_to_9) </span><span class="se">{{</span>
<span class="s2">            if (!final_number_list.includes(char)) </span><span class="se">{{</span>
<span class="s2">                numbers_that_didnt_get_cover.push(char)</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        final_number_list = final_number_list.concat(numbers_that_didnt_get_cover)</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    for (let [index, char] of final_number_list.entries()) </span><span class="se">{{</span>
<span class="s2">        final_dict[String(index)] = char</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="s2">    return final_dict</span>
<span class="se">}}</span><span class="s2">;</span>

<span class="s2">export const encode_message_ = (a_secret_dict: Record&lt;string, string&gt;, message: string):string =&gt; </span><span class="se">{{</span>
<span class="s2">    var new_message = &quot;&quot;</span>
<span class="s2">    for (const char of message) </span><span class="se">{{</span>
<span class="s2">        if ((!(/[a-zA-Z]/).test(char)) &amp;&amp; (!(/^\d$/).test(char))) </span><span class="se">{{</span>
<span class="s2">            new_message += char</span>
<span class="s2">            continue</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        var new_char = a_secret_dict[char.toLowerCase()]</span>
<span class="s2">        if ((/[A-Z]/).test(char)) </span><span class="se">{{</span>
<span class="s2">            new_char = new_char.toUpperCase()</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        new_message += new_char</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    return new_message</span>
<span class="se">}}</span>

<span class="s2">export const decode_message_ = (a_secret_dict: Record&lt;string, string&gt;, message: string):string =&gt; </span><span class="se">{{</span>
<span class="s2">    var new_secret_dict = </span><span class="se">{{}}</span><span class="s2"> as Record&lt;string, string&gt;</span>
<span class="s2">    for (var key of Object.keys(a_secret_dict)) </span><span class="se">{{</span>
<span class="s2">        new_secret_dict[a_secret_dict[key]] = key</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    a_secret_dict = new_secret_dict</span>

<span class="s2">    var new_message = &quot;&quot;</span>
<span class="s2">    for (const char of message) </span><span class="se">{{</span>
<span class="s2">        if ((!(/[a-zA-Z]/).test(char)) &amp;&amp; (!(/^\d$/).test(char))) </span><span class="se">{{</span>
<span class="s2">            new_message += char</span>
<span class="s2">            continue</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        var new_char = a_secret_dict[char.toLowerCase()]</span>
<span class="s2">        if ((/[A-Z]/).test(char)) </span><span class="se">{{</span>
<span class="s2">            new_char = new_char.toUpperCase()</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        new_message += new_char</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    return new_message</span>
<span class="se">}}</span>

<span class="s2">const _general_to_dict_function = (object: any): any =&gt; </span><span class="se">{{</span>
<span class="s2">    let the_type = typeof object</span>
<span class="s2">    if (the_type == &quot;object&quot;) </span><span class="se">{{</span>
<span class="s2">        if (object == null) </span><span class="se">{{</span>
<span class="s2">            return null</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> else if (Array.isArray(object)) </span><span class="se">{{</span>
<span class="s2">            let new_list: any[] = []</span>
<span class="s2">            for (const one of object) </span><span class="se">{{</span>
<span class="s2">                new_list.push(_general_to_dict_function(one))</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">            return new_list</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">            let keys = Object.keys(object);</span>
<span class="s2">            if (keys.includes(&quot;_key_string_dict&quot;)) </span><span class="se">{{</span>
<span class="s2">                // custom message type</span>
<span class="s2">                let new_dict: any = </span><span class="se">{{}}</span>
<span class="s2">                keys = keys.filter((e) =&gt; ![&quot;_property_name_to_its_type_dict&quot;, &quot;_key_string_dict&quot;].includes(e));</span>
<span class="s2">                for (const key of keys) </span><span class="se">{{</span>
<span class="s2">                    new_dict[key] = _general_to_dict_function(object[key])</span>
<span class="s2">                    // the enum will become a string in the end, so ignore it</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">                return new_dict</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">        if (_ygrpc_official_types.includes(typeof object)) </span><span class="se">{{</span>
<span class="s2">            return object</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">            return null</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">    return null</span>
<span class="se">}}</span><span class="s2">;</span>

<span class="s2">const _general_from_dict_function = (old_object: any, new_object: any): any =&gt; </span><span class="se">{{</span>
<span class="s2">    let the_type = typeof new_object</span>
<span class="s2">    if (the_type == &quot;object&quot;) </span><span class="se">{{</span>
<span class="s2">        if (Array.isArray(new_object)) </span><span class="se">{{</span>
<span class="s2">            //list</span>
<span class="s2">            let new_list: any[] = []</span>
<span class="s2">            for (const one of new_object) </span><span class="se">{{</span>
<span class="s2">                new_list.push(structuredClone(_general_from_dict_function(old_object, one)))</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">            return new_list</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">            // dict or null</span>
<span class="s2">            if (new_object == null) </span><span class="se">{{</span>
<span class="s2">                return null</span>
<span class="s2">            </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">                let keys = Object.keys(old_object);</span>
<span class="s2">                if (keys.includes(&quot;_key_string_dict&quot;)) </span><span class="se">{{</span>
<span class="s2">                    keys = Object.keys(old_object._property_name_to_its_type_dict)</span>
<span class="s2">                    for (const key of keys) </span><span class="se">{{</span>
<span class="s2">                        if (Object.keys(new_object).includes(key)) </span><span class="se">{{</span>
<span class="s2">                            if ((typeof old_object._property_name_to_its_type_dict[key]) == &quot;string&quot;) </span><span class="se">{{</span>
<span class="s2">                                // default value type</span>
<span class="s2">                                old_object[key] = new_object[key]</span>
<span class="s2">                            </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">                                // custom message type || enum</span>
<span class="s2">                                if (</span>
<span class="s2">                                    (typeof old_object._property_name_to_its_type_dict[key]).includes(&quot;class&quot;) || </span>
<span class="s2">                                    (typeof old_object._property_name_to_its_type_dict[key]).includes(&quot;function&quot;)</span>
<span class="s2">                                ) </span><span class="se">{{</span>
<span class="s2">                                    // custom message type || a list of custom type</span>
<span class="s2">                                    var reference_object = new (old_object._property_name_to_its_type_dict[key])()</span>
<span class="s2">                                    old_object[key] = structuredClone(_general_from_dict_function(reference_object, new_object[key]))</span>
<span class="s2">                                </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">                                    // enum</span>
<span class="s2">                                    if (Object.keys(new_object).includes(key)) </span><span class="se">{{</span>
<span class="s2">                                        old_object[key] = new_object[key]</span>
<span class="s2">                                    </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">                                        old_object[key] = null</span>
<span class="s2">                                    </span><span class="se">}}</span>
<span class="s2">                                </span><span class="se">}}</span>
<span class="s2">                            </span><span class="se">}}</span>
<span class="s2">                        </span><span class="se">}}</span><span class="s2"> </span>
<span class="s2">                    </span><span class="se">}}</span>
<span class="s2">                </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">                    return null</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> </span>
<span class="s2">    return old_object</span>
<span class="se">}}</span>

<span class="si">{</span><span class="n">enum_code_block_list_text</span><span class="si">}</span>

<span class="si">{</span><span class="n">dataclass_code_block_list_text</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">template_text</span>

    <span class="k">def</span> <span class="nf">_convert_yrpc_code_into_typescript_rpc_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identity_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source_code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">rpc_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_information_from_yrpc_protocol_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

        <span class="n">client_function_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">parameter_info</span> <span class="ow">in</span> <span class="n">rpc_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">input_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;input_variable&quot;</span><span class="p">]</span>
            <span class="n">output_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter_info</span><span class="p">[</span><span class="s2">&quot;output_variable&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">input_variable</span><span class="p">:</span>
                <span class="n">input_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">input_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot; &quot;</span> <span class="ow">in</span> <span class="n">output_variable</span><span class="p">:</span>
                <span class="n">output_variable</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="n">output_variable</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">client_function_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    async </span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">(item: </span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects.</span><span class="si">{</span><span class="n">input_variable</span><span class="si">}</span><span class="s2">, ignore_error?: boolean): Promise&lt;</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects.</span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2"> | null&gt; </span><span class="se">{{</span>
<span class="s2">        let result = await this._get_reponse_or_error_by_url_path_and_input(&quot;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&quot;, item.to_dict())</span>
<span class="s2">        if (Object.keys(result).includes(this._special_error_key)) </span><span class="se">{{</span>
<span class="s2">            if ((ignore_error != null) &amp;&amp; (!ignore_error)) </span><span class="se">{{</span>
<span class="s2">                this._error_handle_function(result[this._special_error_key])</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">            return null</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> else </span><span class="se">{{</span>
<span class="s2">            return new </span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects.</span><span class="si">{</span><span class="n">output_variable</span><span class="si">}</span><span class="s2">().from_dict(result)</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span>
<span class="s2">            &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>

        <span class="n">client_function_list_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">client_function_list</span><span class="p">)</span>

        <span class="n">template_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">import * as </span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects from &#39;./</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">_objects&#39;</span>

<span class="s2">export class Client_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span>
<span class="s2">  /**</span>
<span class="s2">   * @param </span><span class="se">{{</span><span class="s2">string</span><span class="se">}}</span><span class="s2"> _service_url is something like: &quot;http://127.0.0.1:80&quot; or &quot;https://127.0.0.1&quot;</span>
<span class="s2">   * @param </span><span class="se">{{{{</span><span class="s2"> [key: string]: string </span><span class="se">}}}}</span><span class="s2"> _header  http headers, it&#39;s a dictionary, liek </span><span class="se">{{</span><span class="s2">&#39;content-type&#39;, &#39;application/json&#39;</span><span class="se">}}</span>
<span class="s2">   * @param </span><span class="se">{{</span><span class="s2">Function</span><span class="se">}}</span><span class="s2"> _error_handle_function will get called when http request got error, you need to give it a function like: (err: String) </span><span class="se">{{</span><span class="s2">print(err)</span><span class="se">}}</span>
<span class="s2">   */</span>
<span class="s2">    _service_url: string</span>
<span class="s2">    _header: </span><span class="se">{{</span><span class="s2"> [key: string]: string </span><span class="se">}}</span><span class="s2"> = </span><span class="se">{{}}</span>
<span class="s2">    _error_handle_function: (error: string) =&gt; void = (error: string) =&gt; </span><span class="se">{{</span><span class="s2">console.log(error)</span><span class="se">}}</span>
<span class="s2">    _special_error_key: string = &quot;__yingshaoxo&#39;s_error__&quot;</span>

<span class="s2">    constructor(service_url: string, header?: </span><span class="se">{{</span><span class="s2"> [key: string]: string </span><span class="se">}}</span><span class="s2">, error_handle_function?: (error: string) =&gt; void) </span><span class="se">{{</span>
<span class="s2">        if (service_url.endsWith(&quot;/&quot;)) </span><span class="se">{{</span>
<span class="s2">            service_url = service_url.slice(0, service_url.length-1);</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        try </span><span class="se">{{</span>
<span class="s2">            if (location.protocol === &#39;https:&#39;) </span><span class="se">{{</span>
<span class="s2">                if (service_url.startsWith(&quot;http:&quot;)) </span><span class="se">{{</span>
<span class="s2">                    service_url = service_url.replace(&quot;http:&quot;, &quot;https:&quot;)</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">            </span><span class="se">}}</span><span class="s2"> else if (location.protocol === &#39;http:&#39;) </span><span class="se">{{</span>
<span class="s2">                if (service_url.startsWith(&quot;https:&quot;)) </span><span class="se">{{</span>
<span class="s2">                    service_url = service_url.replace(&quot;https:&quot;, &quot;http:&quot;)</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">            </span><span class="se">}}</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> catch (e) </span><span class="se">{{</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">        this._service_url = service_url</span>
<span class="s2">        </span>
<span class="s2">        if (header != null) </span><span class="se">{{</span>
<span class="s2">            this._header = header</span>
<span class="s2">        </span><span class="se">}}</span>

<span class="s2">        if (error_handle_function != null) </span><span class="se">{{</span>
<span class="s2">            this._error_handle_function = error_handle_function</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span><span class="s2"> </span>

<span class="s2">    async _get_reponse_or_error_by_url_path_and_input(sub_url: string, input_dict: </span><span class="se">{{</span><span class="s2"> [key: string]: any </span><span class="se">}}</span><span class="s2">): Promise&lt;any&gt; </span><span class="se">{{</span>
<span class="s2">        let the_url = `$</span><span class="se">{{</span><span class="s2">this._service_url</span><span class="se">}}</span><span class="s2">/</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span><span class="s2">/$</span><span class="se">{{</span><span class="s2">sub_url</span><span class="se">}}</span><span class="s2">/`</span>
<span class="s2">        try </span><span class="se">{{</span>
<span class="s2">            const response = await fetch(the_url, </span>
<span class="s2">            </span><span class="se">{{</span>
<span class="s2">                method: &quot;POST&quot;,</span>
<span class="s2">                body: JSON.stringify(input_dict),</span>
<span class="s2">                headers: </span><span class="se">{{</span>
<span class="s2">                    &quot;Content-type&quot;: &quot;application/json; charset=UTF-8&quot;,</span>
<span class="s2">                    ...this._header</span>
<span class="s2">                </span><span class="se">}}</span>
<span class="s2">            </span><span class="se">}}</span><span class="s2">);</span>
<span class="s2">            return await response.json()</span>
<span class="s2">        </span><span class="se">}}</span><span class="s2"> catch (e) </span><span class="se">{{</span>
<span class="s2">            return </span><span class="se">{{</span><span class="s2">_special_error_key: String(e)</span><span class="se">}}</span><span class="s2">;</span>
<span class="s2">        </span><span class="se">}}</span>
<span class="s2">    </span><span class="se">}}</span>

<span class="si">{</span><span class="n">client_function_list_text</span><span class="si">}</span>
<span class="se">}}</span>

<span class="s2">export default Client_</span><span class="si">{</span><span class="n">identity_name</span><span class="si">}</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">template_text</span>

<div class="viewcode-block" id="YRPC.generate_code"><a class="viewcode-back" href="../../index.html#auto_everything.develop.YRPC.generate_code">[docs]</a>    <span class="k">def</span> <span class="nf">generate_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_folder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">output_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;src/generated_yrpc&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        which_language: python, dart, typescript, go, kotlin, rust and so on</span>

<span class="sd">        input_folder: where protobuff files was located</span>

<span class="sd">        input_files: it is a list, like [&quot;english.proto&quot;, &quot;pornhub.proto&quot;]</span>

<span class="sd">        output_folder: where those generated code file was located</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">input_folder</span> <span class="o">=</span> <span class="n">input_folder</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The input_forder &#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">is_directory</span><span class="p">(</span><span class="n">input_folder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The input_folder &#39;</span><span class="si">{</span><span class="n">input_folder</span><span class="si">}</span><span class="s2">&#39; must be an directory.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">is_directory</span><span class="p">(</span><span class="n">output_folder</span><span class="p">):</span>
            <span class="n">disk</span><span class="o">.</span><span class="n">create_a_folder</span><span class="p">(</span><span class="n">output_folder</span><span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_files</span><span class="p">(</span><span class="n">input_folder</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">type_limiter</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.proto&quot;</span><span class="p">])</span>

        <span class="n">new_files</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">one</span> <span class="k">for</span> <span class="n">one</span> <span class="ow">in</span> <span class="n">input_files</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">one</span><span class="p">)]):</span>
                <span class="n">new_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="n">new_files</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">language_to_file_suffix_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;python&quot;</span><span class="p">:</span> <span class="s2">&quot;.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dart&quot;</span><span class="p">:</span> <span class="s2">&quot;.dart&quot;</span><span class="p">,</span>
            <span class="s2">&quot;typescript&quot;</span><span class="p">:</span> <span class="s2">&quot;.ts&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">which_language</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">language_to_file_suffix_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sorry, we don&#39;t support &#39;</span><span class="si">{</span><span class="n">which_language</span><span class="si">}</span><span class="s2">&#39; language.&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">which_language</span> <span class="o">==</span> <span class="s2">&quot;python&quot;</span><span class="p">:</span>
            <span class="n">init_file_for_python</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="s2">&quot;__init__.py&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">disk</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">init_file_for_python</span><span class="p">):</span>
                <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">init_file_for_python</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">filename</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">get_stem_and_suffix_of_a_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

            <span class="n">target_objects_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;_objects&quot;</span> <span class="o">+</span> <span class="n">language_to_file_suffix_dict</span><span class="p">[</span><span class="n">which_language</span><span class="p">])</span>
            <span class="n">target_rpc_file_path</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">join_paths</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;_rpc&quot;</span> <span class="o">+</span> <span class="n">language_to_file_suffix_dict</span><span class="p">[</span><span class="n">which_language</span><span class="p">])</span>

            <span class="n">source_code</span> <span class="o">=</span> <span class="n">io_</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file</span><span class="p">)</span>

            <span class="n">objects_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">rpc_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">which_language</span> <span class="o">==</span> <span class="s2">&quot;python&quot;</span><span class="p">:</span>
                <span class="n">objects_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_python_objects_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
                <span class="n">rpc_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_python_rpc_code</span><span class="p">(</span><span class="n">identity_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">which_language</span> <span class="o">==</span> <span class="s2">&quot;dart&quot;</span><span class="p">:</span>
                <span class="n">objects_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_dart_objects_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
                <span class="n">rpc_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_dart_rpc_code</span><span class="p">(</span><span class="n">identity_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">which_language</span> <span class="o">==</span> <span class="s2">&quot;typescript&quot;</span><span class="p">:</span>
                <span class="n">objects_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_typescript_objects_code</span><span class="p">(</span><span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
                <span class="n">rpc_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_yrpc_code_into_typescript_rpc_code</span><span class="p">(</span><span class="n">identity_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">source_code</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>

            <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">target_objects_file_path</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">objects_code</span><span class="p">)</span>
            <span class="n">io_</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">target_rpc_file_path</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="n">rpc_code</span><span class="p">)</span></div></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">yrpc</span> <span class="o">=</span> <span class="n">YRPC</span><span class="p">()</span>

    <span class="c1"># result1, result2 = yrpc.get_information_from_yrpc_protocol_code(io_.read(&quot;/Users/yingshaoxo/CS/auto_everything/playground/develop/test_protobuff_code.proto&quot;))</span>
    <span class="c1"># pprint(result1)</span>

    <span class="k">for</span> <span class="n">language</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;dart&quot;</span><span class="p">,</span> <span class="s2">&quot;typescript&quot;</span><span class="p">]:</span>
        <span class="n">yrpc</span><span class="o">.</span><span class="n">generate_code</span><span class="p">(</span>
            <span class="n">which_language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
            <span class="n">input_folder</span><span class="o">=</span><span class="s2">&quot;/Users/yingshaoxo/CS/auto_everything/playground/develop&quot;</span><span class="p">,</span>
            <span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;test_protobuff_code.proto&quot;</span><span class="p">],</span>
            <span class="n">output_folder</span><span class="o">=</span><span class="s2">&quot;/Users/yingshaoxo/CS/auto_everything/playground/develop/build&quot;</span>
        <span class="p">)</span>

    <span class="c1"># grpc = GRPC()</span>
    <span class="c1"># grpc.generate_python_code(</span>
    <span class="c1">#     input_folder=&quot;/tmp/hi/protos/&quot;, output_folder=&quot;/tmp/hi/py_grpc&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># grpc.generate_golang_code(</span>
    <span class="c1">#     input_folder=&quot;/tmp/hi/protos/&quot;, output_folder=&quot;/tmp/hi/go_grpc&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># grpc.generate_dart_code(</span>
    <span class="c1">#     input_folder=&quot;/tmp/hi/protos/&quot;, output_folder=&quot;/tmp/hi/dart_grpc&quot;</span>
    <span class="c1"># )</span>
    <span class="c1"># grpc.generate_key_string_map_from_protocols(</span>
    <span class="c1">#     for_which_language=&quot;golang&quot;,</span>
    <span class="c1">#     input_folder=&quot;/Users/yingshaoxo/CS/we_love_party/party_protocols/protocols&quot;,</span>
    <span class="c1">#     input_files=[&quot;management_service.proto&quot;],</span>
    <span class="c1">#     output_folder=&quot;/Users/yingshaoxo/CS/we_love_party/management_system/golang_backend_service/grpc_key_string_maps&quot;,</span>
    <span class="c1"># )</span>
    <span class="c1"># grpc.generate_typescript_code(</span>
    <span class="c1">#     input_folder=&quot;/Users/yingshaoxo/CS/we_love_party/party_protocols/protocols&quot;,</span>
    <span class="c1">#     input_files=[&quot;management_service.proto&quot;],</span>
    <span class="c1">#     project_root_folder=&quot;/Users/yingshaoxo/CS/we_love_party/management_system/react_web_client&quot;,</span>
    <span class="c1">#     output_folder=&quot;/Users/yingshaoxo/CS/we_love_party/management_system/react_web_client/src/generated_grpc&quot;,</span>
    <span class="c1"># )</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

<div class="github">
    <a href="https://github.com/yingshaoxo/auto_everything">
        <span>Fork me on GitHub</span>
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
    </a>
</div>


    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2020, yingshaoxo.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.1.3.
    </div>
    

  </body>
</html>